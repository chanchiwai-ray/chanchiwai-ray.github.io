<!DOCTYPE html><html lang="en-us" class="__variable_bc0dcf scroll-smooth"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/7cba1811e3c25a15-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/ce39e5fd71ac2204.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/2d617ddf3705e99d.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/10e892855c0ee316.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-411553d874472be6.js"/><script src="/_next/static/chunks/4bd1b696-fd566b7ef040c634.js" async=""></script><script src="/_next/static/chunks/517-8f0473015f82d7dc.js" async=""></script><script src="/_next/static/chunks/main-app-156574f202e05fbb.js" async=""></script><script src="/_next/static/chunks/c16f53c3-db36c35b4eab1cc3.js" async=""></script><script src="/_next/static/chunks/173-cdf34a84fb71192b.js" async=""></script><script src="/_next/static/chunks/830-c94ab44a0e17ca4a.js" async=""></script><script src="/_next/static/chunks/app/layout-fed54404a194d21a.js" async=""></script><script src="/_next/static/chunks/970-9f18edc3a6e123c8.js" async=""></script><script src="/_next/static/chunks/app/blog/%5B...slug%5D/page-9b88551e61e607f4.js" async=""></script><link rel="preload" href="https://analytics.umami.is/script.js" as="script"/><link rel="preload" href="https://www.googletagmanager.com/gtag/js?id=" as="script"/><meta name="next-size-adjust" content=""/><link rel="icon" type="image/png" sizes="64x64" href="/static/favicons/favicon-64x64.png"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><title>Setting Up Ceph Cluster with MicroCeph | Ray&#x27;s Blog</title><meta name="description" content="Learning Ceph can sometimes be difficult due the resources required to set up a Ceph cluster. In this post, I am going demonstrate how you can set up a Ceph cluster on your laptop."/><meta name="robots" content="index, follow"/><meta name="googlebot" content="index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"/><link rel="canonical" href="https://chanchiwai-ray.github.io/blog/ceph/deploy-three-nodes-microceph"/><link rel="alternate" type="application/rss+xml" href="https://chanchiwai-ray.github.io/feed.xml"/><meta property="og:title" content="Setting Up Ceph Cluster with MicroCeph"/><meta property="og:description" content="Learning Ceph can sometimes be difficult due the resources required to set up a Ceph cluster. In this post, I am going demonstrate how you can set up a Ceph cluster on your laptop."/><meta property="og:url" content="https://chanchiwai-ray.github.io/blog/ceph/deploy-three-nodes-microceph"/><meta property="og:site_name" content="Ray&#x27;s Blog"/><meta property="og:locale" content="en_US"/><meta property="og:image" content="https://chanchiwai-ray.github.io/static/images/x-card.png"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2025-02-28T00:00:00.000Z"/><meta property="article:modified_time" content="2025-02-28T00:00:00.000Z"/><meta property="article:author" content="Chi Wai CHAN"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Setting Up Ceph Cluster with MicroCeph"/><meta name="twitter:description" content="Learning Ceph can sometimes be difficult due the resources required to set up a Ceph cluster. In this post, I am going demonstrate how you can set up a Ceph cluster on your laptop."/><meta name="twitter:image" content="https://chanchiwai-ray.github.io/static/images/x-card.png"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="bg-white pl-[calc(100vw-100%)] text-black antialiased dark:bg-gray-950 dark:text-white"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><section class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><header class="flex items-center w-full bg-white dark:bg-gray-950 justify-between py-10 sticky top-0 z-50"><a class="break-words" aria-label="Ray&#x27;s Blog" href="/"><div class="flex items-center justify-between"><div class="hidden h-6 text-2xl font-semibold sm:block">Ray&#x27;s Blog</div></div></a><div class="flex items-center space-x-4 leading-5 sm:space-x-6"><div class="no-scrollbar hidden max-w-40 items-center space-x-4 overflow-x-auto pr-2 sm:flex sm:space-x-6 md:max-w-72 lg:max-w-96"><a class="m-1 block font-medium text-gray-900 hover:text-primary-500 dark:text-gray-100 dark:hover:text-primary-400" href="/blog">Blog</a><a class="m-1 block font-medium text-gray-900 hover:text-primary-500 dark:text-gray-100 dark:hover:text-primary-400" href="/tags">Tags</a><a class="m-1 block font-medium text-gray-900 hover:text-primary-500 dark:text-gray-100 dark:hover:text-primary-400" href="/projects">Projects</a><a class="m-1 block font-medium text-gray-900 hover:text-primary-500 dark:text-gray-100 dark:hover:text-primary-400" href="/about">About</a></div><button aria-label="Search"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-6 w-6 text-gray-900 hover:text-primary-500 dark:text-gray-100 dark:hover:text-primary-400"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg></button><div class="mr-5 flex items-center"><div class="relative inline-block text-left" data-headlessui-state=""><div class="flex items-center justify-center hover:text-primary-500 dark:hover:text-primary-400"><button aria-label="Theme switcher" id="headlessui-menu-button-:Resqddb:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><svg class="h-6 w-6"></svg></button></div></div></div><button aria-label="Toggle Menu" class="sm:hidden"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="h-8 w-8 text-gray-900 hover:text-primary-500 dark:text-gray-100 dark:hover:text-primary-400"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><span hidden="" style="position:fixed;top:1px;left:1px;width:1px;height:0;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;display:none"></span></div></header><main class="mb-auto"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"Setting Up Ceph Cluster with MicroCeph","datePublished":"2025-02-28T00:00:00.000Z","dateModified":"2025-02-28T00:00:00.000Z","description":"Learning Ceph can sometimes be difficult due the resources required to set up a Ceph cluster. In this post, I am going demonstrate how you can set up a Ceph cluster on your laptop.","image":"/static/images/x-card.png","url":"https://chanchiwai-ray.github.io/blog/ceph/deploy-three-nodes-microceph","author":[{"@type":"Person","name":"Chi Wai CHAN"}]}</script><section class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed bottom-8 right-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Comment" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll To Top" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2025-02-28T00:00:00.000Z">Friday, February 28, 2025</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">Setting Up Ceph Cluster with MicroCeph</h1></div></div></header><div class="grid-rows-[auto_1fr] divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0"><dl class="pb-10 pt-6 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex flex-wrap justify-center gap-4 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><img alt="avatar" loading="lazy" width="38" height="38" decoding="async" data-nimg="1" class="h-10 w-10 rounded-full" style="color:transparent" src="/static/images/avatar.png"/><dl class="whitespace-nowrap text-sm font-medium leading-5"><dt class="sr-only">Name</dt><dd class="text-gray-900 dark:text-gray-100">Chi Wai CHAN</dd><dt class="sr-only">Linkedin and GitHub</dt><dd><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/chi-wai-chan-ba5870137">@Linkedin</a> • <a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" target="_blank" rel="noopener noreferrer" href="https://github.com/chanchiwai-ray">@Github</a></dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pb-8 pt-10 dark:prose-invert"><h2 class="content-header" id="-introduction"><a class="break-words" href="#-introduction" aria-hidden="true" tabindex="-1"><span class="content-header-link"><svg viewBox="0 0 20 20" class="h-5 linkicon w-5" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"></path><path d="M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"></path></svg></span></a>🌟 Introduction</h2><p>Learning Ceph can sometimes be difficult due the <a class="break-words" target="_blank" rel="noopener noreferrer" href="https://docs.ceph.com/en/latest/start/hardware-recommendations/#minimum-hardware-recommendations">resources</a> required to set up a Ceph cluster. However, thanks to creation of <a class="break-words" target="_blank" rel="noopener noreferrer" href="https://documentation.ubuntu.com/lxd/en/latest/">LXD</a> and <a class="break-words" target="_blank" rel="noopener noreferrer" href="https://canonical-microceph.readthedocs-hosted.com/en/latest/">MicroCeph</a>, we now have a way to create multi-node Ceph cluster with limited resources.</p><p>In this post, I am going to show you how to set up a Ceph cluster on you local desktop or laptop for <strong>testing or learning</strong> purpose.</p><div class="markdown-alert markdown-alert-warning" dir="auto"><p class="markdown-alert-title" dir="auto"><svg viewBox="0 0 16 16" aria-hidden="true" class="octicon" height="16" width="16"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg>WARNING</p><p>Do not use it for production! This is not a tutorial for setting up a production grade Ceph cluster!</p></div><ul class=""><li class=""><a href="#-introduction">🌟 Introduction</a></li><li class=""><a href="#-prerequisite">🪨 Prerequisite</a></li><li class=""><a href="#-getting-started">🚀 Getting Started</a><ul class=""><li class=""><a href="#-create-block-storage">💿 Create block storage</a></li><li class=""><a href="#-create-lxd-virtual-machines">💻 Create LXD virtual machines</a></li><li class=""><a href="#-attach-volume-disk-to-lxd-virtual-machines">🔗 Attach volume (disk) to LXD virtual machines</a></li><li class=""><a href="#-install-microceph">🌎 Install MicroCeph</a></li><li class=""><a href="#-bootstrap-microceph-cluster">👢 Bootstrap MicroCeph cluster</a></li><li class=""><a href="#-add-disks-to-microceph-cluster">💽 Add disks to MicroCeph cluster</a></li><li class=""><a href="#-check-the-status-of-microceph-cluster">💡 Check the status of MicroCeph cluster</a></li><li class=""><a href="#-manage-the-microceph-cluster">🧙 Manage the MicroCeph cluster</a></li></ul></li><li class=""><a href="#-clean-up-resources">🧹 Clean up resources</a></li></ul><h2 class="content-header" id="-prerequisite"><a class="break-words" href="#-prerequisite" aria-hidden="true" tabindex="-1"><span class="content-header-link"><svg viewBox="0 0 20 20" class="h-5 linkicon w-5" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"></path><path d="M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"></path></svg></span></a>🪨 Prerequisite</h2><p>Before you continue with the tutorial, please make sure that you have met the following software or hardware requirements. You can follow the link to install and initialize the software required for this tutorial.</p><ul><li><a class="break-words" target="_blank" rel="noopener noreferrer" href="https://documentation.ubuntu.com/lxd/en/latest/">LXD</a></li><li>About 8 vCPUs</li><li>About 8 GiB of RAMs</li><li>(optional) Some additional disk(s) on the host</li></ul><p>The hardware requirements are not strict, you should still be able to complete the deployment with a less powerful machine. Also, you don&#x27;t necessarily need to have additional disks If you have enough storage for the host.</p><h2 class="content-header" id="-getting-started"><a class="break-words" href="#-getting-started" aria-hidden="true" tabindex="-1"><span class="content-header-link"><svg viewBox="0 0 20 20" class="h-5 linkicon w-5" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"></path><path d="M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"></path></svg></span></a>🚀 Getting Started</h2><p>The tutorial will set up 3 LXD VMs with one root disk and one extra disk, and each disk will have 10 GiB of storage. Each VMs will need 2 vCPUs and 2 GiB of RAMs.</p><ul><li>microceph-1<ul><li>1 root disk of 10 GiB</li><li>1 extra disk of 10 GiB</li><li>2 vCPUs</li><li>2 GiB of RAMs</li></ul></li><li>microceph-2<ul><li>1 root disk of 10 GiB</li><li>1 extra disk of 10 GiB</li><li>2 vCPUs</li><li>2 GiB of RAMs</li></ul></li><li>microceph-3<ul><li>1 root disk of 10 GiB</li><li>1 extra disk of 10 GiB</li><li>2 vCPUs</li><li>2 GiB of RAMs</li></ul></li></ul><h3 class="content-header" id="-create-block-storage"><a class="break-words" href="#-create-block-storage" aria-hidden="true" tabindex="-1"><span class="content-header-link"><svg viewBox="0 0 20 20" class="h-5 linkicon w-5" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"></path><path d="M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"></path></svg></span></a>💿 Create block storage</h3><p>First, we need to create the extra disks for each VMs.</p><div class="relative"><pre><code class="language-shell code-highlight"><span class="code-line"><span class="token keyword">for</span> <span class="token variable for-or-select">i</span> <span class="token keyword">in</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>
</span><span class="code-line"><span class="token keyword">do</span>
</span><span class="code-line">  lxc storage volume create default <span class="token variable parameter">--type</span> block microceph-volume-<span class="token variable">$i</span> <span class="token variable assign-left">size</span><span class="token operator">=</span>10GiB
</span><span class="code-line"><span class="token keyword">done</span>
</span></code></pre></div><p>This creates 3 block devices on the <code>default</code> storage pool, and each block device has a size of 10 GiB.</p><div class="markdown-alert markdown-alert-note" dir="auto"><p class="markdown-alert-title" dir="auto"><svg viewBox="0 0 16 16" aria-hidden="true" class="octicon" height="16" width="16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>NOTE</p><p>If you are using an extra disk, you can configure a storage pool on that extra disk, and create volumes on that storage pool. For more information, see <a class="break-words" target="_blank" rel="noopener noreferrer" href="https://documentation.ubuntu.com/lxd/en/latest/howto/storage_pools">https://documentation.ubuntu.com/lxd/en/latest/howto/storage_pools</a>.</p></div><p>To verify if the block devices have been created, run</p><div class="relative"><pre><code class="language-shell code-highlight"><span class="code-line">$ lxc storage volume list
</span><span class="code-line">+---------+-----------+--------------------+-------------+--------------+---------+
</span><span class="code-line"><span class="token operator">|</span>  POOL   <span class="token operator">|</span>   TYPE    <span class="token operator">|</span>        NAME        <span class="token operator">|</span> DESCRIPTION <span class="token operator">|</span> CONTENT-TYPE <span class="token operator">|</span> USED BY <span class="token operator">|</span>
</span><span class="code-line">+---------+-----------+--------------------+-------------+--------------+---------+
</span><span class="code-line"><span class="token operator">|</span> default <span class="token operator">|</span> custom    <span class="token operator">|</span> microceph-volume-1 <span class="token operator">|</span>             <span class="token operator">|</span> block        <span class="token operator">|</span> <span class="token number">0</span>       <span class="token operator">|</span>
</span><span class="code-line">+---------+-----------+--------------------+-------------+--------------+---------+
</span><span class="code-line"><span class="token operator">|</span> default <span class="token operator">|</span> custom    <span class="token operator">|</span> microceph-volume-2 <span class="token operator">|</span>             <span class="token operator">|</span> block        <span class="token operator">|</span> <span class="token number">0</span>       <span class="token operator">|</span>
</span><span class="code-line">+---------+-----------+--------------------+-------------+--------------+---------+
</span><span class="code-line"><span class="token operator">|</span> default <span class="token operator">|</span> custom    <span class="token operator">|</span> microceph-volume-3 <span class="token operator">|</span>             <span class="token operator">|</span> block        <span class="token operator">|</span> <span class="token number">0</span>       <span class="token operator">|</span>
</span><span class="code-line">+---------+-----------+--------------------+-------------+--------------+---------+
</span></code></pre></div><p>, and you should see something like that.</p><h3 class="content-header" id="-create-lxd-virtual-machines"><a class="break-words" href="#-create-lxd-virtual-machines" aria-hidden="true" tabindex="-1"><span class="content-header-link"><svg viewBox="0 0 20 20" class="h-5 linkicon w-5" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"></path><path d="M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"></path></svg></span></a>💻 Create LXD virtual machines</h3><p>Next, we need to create 3 LXD VMs.</p><div class="relative"><pre><code class="language-shell code-highlight"><span class="code-line"><span class="token keyword">for</span> <span class="token variable for-or-select">i</span> <span class="token keyword">in</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>
</span><span class="code-line"><span class="token keyword">do</span>
</span><span class="code-line">  lxc launch ubuntu:24.04 microceph-<span class="token variable">$i</span> <span class="token variable parameter">--vm</span> <span class="token variable parameter">-c</span> <span class="token variable assign-left">limits.cpu</span><span class="token operator">=</span><span class="token number">2</span> <span class="token variable parameter">-c</span> <span class="token variable assign-left">limits.memory</span><span class="token operator">=</span>2GiB <span class="token variable parameter">-d</span> root,size<span class="token operator">=</span>10GiB
</span><span class="code-line"><span class="token keyword">done</span>
</span></code></pre></div><p>This creates 3 Ubuntu@24.04 LXD VMs with 2 cpus, 2 GiB of memory, and a root disk of 10GiB. You can adjust the number of cpu, memory, and disks depending on the resources you have.</p><p>To verify if the VMs have been created, run</p><div class="relative"><pre><code class="language-shell code-highlight"><span class="code-line">$ lxc list
</span><span class="code-line">+---------------+---------+-----------------------+------+-----------------+-----------+
</span><span class="code-line"><span class="token operator">|</span>     NAME      <span class="token operator">|</span>  STATE  <span class="token operator">|</span>         IPV4          <span class="token operator">|</span> IPV6 <span class="token operator">|</span>      TYPE       <span class="token operator">|</span> SNAPSHOTS <span class="token operator">|</span>
</span><span class="code-line">+---------------+---------+-----------------------+------+-----------------+-----------+
</span><span class="code-line"><span class="token operator">|</span> microceph-1   <span class="token operator">|</span> RUNNING <span class="token operator">|</span> <span class="token number">10.42</span>.75.215 <span class="token punctuation">(</span>enp5s0<span class="token punctuation">)</span> <span class="token operator">|</span>      <span class="token operator">|</span> VIRTUAL-MACHINE <span class="token operator">|</span> <span class="token number">0</span>         <span class="token operator">|</span>
</span><span class="code-line">+---------------+---------+-----------------------+------+-----------------+-----------+
</span><span class="code-line"><span class="token operator">|</span> microceph-2   <span class="token operator">|</span> RUNNING <span class="token operator">|</span> <span class="token number">10.42</span>.75.5 <span class="token punctuation">(</span>enp5s0<span class="token punctuation">)</span>   <span class="token operator">|</span>      <span class="token operator">|</span> VIRTUAL-MACHINE <span class="token operator">|</span> <span class="token number">0</span>         <span class="token operator">|</span>
</span><span class="code-line">+---------------+---------+-----------------------+------+-----------------+-----------+
</span><span class="code-line"><span class="token operator">|</span> microceph-3   <span class="token operator">|</span> RUNNING <span class="token operator">|</span> <span class="token number">10.42</span>.75.75 <span class="token punctuation">(</span>enp5s0<span class="token punctuation">)</span>  <span class="token operator">|</span>      <span class="token operator">|</span> VIRTUAL-MACHINE <span class="token operator">|</span> <span class="token number">0</span>         <span class="token operator">|</span>
</span><span class="code-line">+---------------+---------+-----------------------+------+-----------------+-----------+
</span></code></pre></div><p>, and you see something like that.</p><h3 class="content-header" id="-attach-volume-disk-to-lxd-virtual-machines"><a class="break-words" href="#-attach-volume-disk-to-lxd-virtual-machines" aria-hidden="true" tabindex="-1"><span class="content-header-link"><svg viewBox="0 0 20 20" class="h-5 linkicon w-5" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"></path><path d="M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"></path></svg></span></a>🔗 Attach volume (disk) to LXD virtual machines</h3><p>Next, we need to attach the volumes to the virtual machines, so that the virtual machines have one extra disk for the OSD.</p><div class="relative"><pre><code class="language-shell code-highlight"><span class="code-line"><span class="token keyword">for</span> <span class="token variable for-or-select">i</span> <span class="token keyword">in</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>
</span><span class="code-line"><span class="token keyword">do</span>
</span><span class="code-line">  lxc storage volume attach default microceph-volume-<span class="token variable">$i</span> microceph-<span class="token variable">$i</span>
</span><span class="code-line"><span class="token keyword">done</span>
</span></code></pre></div><p>To verify if the VM has one extra disk, run</p><div class="relative"><pre><code class="code-highlight language-text"><span class="code-line">$ lxc exec microceph-1 -- lsblk
</span><span class="code-line">NAME    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
</span><span class="code-line">sda       8:0    0   10G  0 disk
</span><span class="code-line">├─sda1    8:1    0    9G  0 part /
</span><span class="code-line">├─sda14   8:14   0    4M  0 part
</span><span class="code-line">├─sda15   8:15   0  106M  0 part /boot/efi
</span><span class="code-line">└─sda16 259:0    0  913M  0 part /boot
</span><span class="code-line">sdb       8:16   0   10G  0 disk
</span></code></pre></div><p>. This will run a <code>lsblk</code> command on node <code>microceph-1</code>. Note that <code>/dev/sdb</code> is the attached volume. You can verify the disk on the other nodes by repeating the same command.</p><h3 class="content-header" id="-install-microceph"><a class="break-words" href="#-install-microceph" aria-hidden="true" tabindex="-1"><span class="content-header-link"><svg viewBox="0 0 20 20" class="h-5 linkicon w-5" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"></path><path d="M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"></path></svg></span></a>🌎 Install MicroCeph</h3><p>Next, we need to install MicroCeph on each node.</p><div class="relative"><pre><code class="language-shell code-highlight"><span class="code-line"><span class="token keyword">for</span> <span class="token variable for-or-select">i</span> <span class="token keyword">in</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>
</span><span class="code-line"><span class="token keyword">do</span>
</span><span class="code-line">  lxc <span class="token builtin class-name">exec</span> microceph-<span class="token variable">$i</span> -- snap <span class="token function">install</span> microceph <span class="token variable parameter">--channel</span> squid/stable
</span><span class="code-line"><span class="token keyword">done</span>
</span></code></pre></div><p>This will install MicroCeph from <code>squid/stable</code> channel on each node.</p><h3 class="content-header" id="-bootstrap-microceph-cluster"><a class="break-words" href="#-bootstrap-microceph-cluster" aria-hidden="true" tabindex="-1"><span class="content-header-link"><svg viewBox="0 0 20 20" class="h-5 linkicon w-5" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"></path><path d="M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"></path></svg></span></a>👢 Bootstrap MicroCeph cluster</h3><div class="markdown-alert markdown-alert-note" dir="auto"><p class="markdown-alert-title" dir="auto"><svg viewBox="0 0 16 16" aria-hidden="true" class="octicon" height="16" width="16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>NOTE</p><p>You can use <code>lxc exec &lt;node-name&gt; -- su ubuntu</code> to login to each node as <code>ubuntu</code> user</p></div><p>On node <code>microceph-1</code>, initialize the MicroCeph cluster by running:</p><div class="relative"><pre><code class="language-shell code-highlight"><span class="code-line"><span class="token function">sudo</span> microceph cluster bootstrap
</span></code></pre></div><p>Then, generate the registration tokens for <code>microceph-2</code> and <code>microceph-3</code> by running the following commands:</p><div class="relative"><pre><code class="language-shell code-highlight"><span class="code-line"><span class="token function">sudo</span> microceph cluster <span class="token function">add</span> microceph-2
</span><span class="code-line"><span class="token variable assign-left">eyJzZWNyZXQiOiJjYzhhZWFlM2NiN2JiM2JjM2VmZTg4MzNjZTA1YTgxMjcxZDg3MjdhZGZhZWExZGZiNmE4MzA3MDdhNzNiYzhlIiwiZmluZ2VycHJpbnQiOiI5YWE5MDljMTY3MjM2ZmI4OGU3NmI4OWRlN2NjYTRhNzc5OTQwOWNkZDE1MzgxMGQzMjJmYzFiNjE1OTdiODU4Iiwiam9pbl9hZGRyZXNzZXMiOlsiMTAuNDIuNzUuMjE1Ojc0NDMiXX0</span><span class="token operator">=</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">sudo</span> microceph cluster <span class="token function">add</span> microceph-3
</span><span class="code-line"><span class="token variable assign-left">eyJzZWNyZXQiOiJiMDFiZTAxZjFkOTVlN2JmOWMwYTM1Mzg2ZWQ1ZTg2NzMxNzdhYTRhYzlkYzQ5N2Q0MmI2NTNkNzRmOTczNTg1IiwiZmluZ2VycHJpbnQiOiI5YWE5MDljMTY3MjM2ZmI4OGU3NmI4OWRlN2NjYTRhNzc5OTQwOWNkZDE1MzgxMGQzMjJmYzFiNjE1OTdiODU4Iiwiam9pbl9hZGRyZXNzZXMiOlsiMTAuNDIuNzUuMjE1Ojc0NDMiXX0</span><span class="token operator">=</span>
</span></code></pre></div><p>Next, you can add node <code>microceph-2</code> and <code>microceph-3</code> to the cluster using the registration tokens.</p><p>On <code>microceph-2</code>, add the node to the cluster by running:</p><div class="relative"><pre><code class="language-shell code-highlight"><span class="code-line"><span class="token function">sudo</span> microceph cluster <span class="token function">join</span> <span class="token variable assign-left">eyJzZWNyZXQiOiJjYzhhZWFlM2NiN2JiM2JjM2VmZTg4MzNjZTA1YTgxMjcxZDg3MjdhZGZhZWExZGZiNmE4MzA3MDdhNzNiYzhlIiwiZmluZ2VycHJpbnQiOiI5YWE5MDljMTY3MjM2ZmI4OGU3NmI4OWRlN2NjYTRhNzc5OTQwOWNkZDE1MzgxMGQzMjJmYzFiNjE1OTdiODU4Iiwiam9pbl9hZGRyZXNzZXMiOlsiMTAuNDIuNzUuMjE1Ojc0NDMiXX0</span><span class="token operator">=</span>
</span></code></pre></div><p>On <code>microceph-3</code>, add the node to the cluster by running:</p><div class="relative"><pre><code class="language-shell code-highlight"><span class="code-line"><span class="token function">sudo</span> microceph cluster <span class="token function">join</span> <span class="token variable assign-left">eyJzZWNyZXQiOiJiMDFiZTAxZjFkOTVlN2JmOWMwYTM1Mzg2ZWQ1ZTg2NzMxNzdhYTRhYzlkYzQ5N2Q0MmI2NTNkNzRmOTczNTg1IiwiZmluZ2VycHJpbnQiOiI5YWE5MDljMTY3MjM2ZmI4OGU3NmI4OWRlN2NjYTRhNzc5OTQwOWNkZDE1MzgxMGQzMjJmYzFiNjE1OTdiODU4Iiwiam9pbl9hZGRyZXNzZXMiOlsiMTAuNDIuNzUuMjE1Ojc0NDMiXX0</span><span class="token operator">=</span>
</span></code></pre></div><h3 class="content-header" id="-add-disks-to-microceph-cluster"><a class="break-words" href="#-add-disks-to-microceph-cluster" aria-hidden="true" tabindex="-1"><span class="content-header-link"><svg viewBox="0 0 20 20" class="h-5 linkicon w-5" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"></path><path d="M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"></path></svg></span></a>💽 Add disks to MicroCeph cluster</h3><p>Initially, the MicroCeph cluster is bootstrapped without disks (i.e. no OSDs), you will need to add the free disk that we have attached in the <a class="break-words" href="#attach-volume-disk-to-lxd-virtual-machines">previous step</a></p><p>On each of the nodes <code>microceph-1</code>, <code>microceph-2</code>, and <code>microceph-3</code>, run</p><div class="relative"><pre><code class="language-shell code-highlight"><span class="code-line"><span class="token function">sudo</span> microceph disk <span class="token function">add</span> /dev/sdb <span class="token variable parameter">--wipe</span>  <span class="token comment"># Note, you might need to change the device name if you have a different device name</span>
</span></code></pre></div><p>. This will configure the device <code>/dev/sdb</code> to be the OSD, and wipe all the data on that device. (Note, it is safe to wipe the device since you&#x27;ve just created it, but if you are reusing volumes from other projects, please make sure to backup the data.)</p><h3 class="content-header" id="-check-the-status-of-microceph-cluster"><a class="break-words" href="#-check-the-status-of-microceph-cluster" aria-hidden="true" tabindex="-1"><span class="content-header-link"><svg viewBox="0 0 20 20" class="h-5 linkicon w-5" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"></path><path d="M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"></path></svg></span></a>💡 Check the status of MicroCeph cluster</h3><p>Finally, we&#x27;ve deployed the MicroCeph cluster, and you can now verify the deployment status using <code>microceph</code> command.</p><p>On <strong>any</strong> of the nodes <code>microceph-1</code>, <code>microceph-2</code>, and <code>microceph-3</code>, run</p><div class="relative"><pre><code class="language-shell code-highlight"><span class="code-line"><span class="token function">sudo</span> microceph status
</span></code></pre></div><p>This will show you the status of the MicroCeph cluster, and you should see something like this:</p><div class="relative"><pre><code class="code-highlight language-text"><span class="code-line">MicroCeph deployment summary:
</span><span class="code-line">- microceph-1 (10.42.75.215)
</span><span class="code-line">  Services: mds, mgr, mon, osd
</span><span class="code-line">  Disks: 1
</span><span class="code-line">- microceph-2 (10.42.75.5)
</span><span class="code-line">  Services: mds, mgr, mon, osd
</span><span class="code-line">  Disks: 1
</span><span class="code-line">- microceph-3 (10.42.75.75)
</span><span class="code-line">  Services: mds, mgr, mon, osd
</span><span class="code-line">  Disks: 1
</span></code></pre></div><h3 class="content-header" id="-manage-the-microceph-cluster"><a class="break-words" href="#-manage-the-microceph-cluster" aria-hidden="true" tabindex="-1"><span class="content-header-link"><svg viewBox="0 0 20 20" class="h-5 linkicon w-5" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"></path><path d="M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"></path></svg></span></a>🧙 Manage the MicroCeph cluster</h3><p>You can manage the cluster with the <code>ceph</code> tool itself. MicroCeph also have a subcommand to access the <code>ceph</code> tool.</p><p>On <strong>any</strong> of the node <code>microceph-1</code>, <code>microceph-2</code>, and <code>microceph-3</code>, run</p><div class="relative"><pre><code class="language-shell code-highlight"><span class="code-line"><span class="token function">sudo</span> microceph.ceph <span class="token variable parameter">-s</span>
</span></code></pre></div><p>This will show you the status of the Ceph cluster, and you should see something like this:</p><div class="relative"><pre><code class="code-highlight language-text"><span class="code-line">$ sudo microceph.ceph -s
</span><span class="code-line">  cluster:
</span><span class="code-line">    id:     c2a1abab-bfb7-4683-a14b-93713d75fc99
</span><span class="code-line">    health: HEALTH_OK
</span><span class="code-line">
</span><span class="code-line">  services:
</span><span class="code-line">    mon: 3 daemons, quorum microceph-1,microceph-2,microceph-3 (age 24m)
</span><span class="code-line">    mgr: microceph-1(active, since 38m), standbys: microceph-2, microceph-3
</span><span class="code-line">    osd: 3 osds: 3 up (since 11m), 3 in (since 11m)
</span><span class="code-line">
</span><span class="code-line">  data:
</span><span class="code-line">    pools:   1 pools, 1 pgs
</span><span class="code-line">    objects: 2 objects, 577 KiB
</span><span class="code-line">    usage:   83 MiB used, 30 GiB / 30 GiB avail
</span><span class="code-line">    pgs:     1 active+clean
</span></code></pre></div><p>Alternatively, you can also manage the cluster from your host machine. To do that, you will need to copy the <code>ceph.conf</code> and <code>ceph.keyring</code> to the host machine.</p><p>On the host machine, run</p><div class="relative"><pre><code class="language-shell code-highlight"><span class="code-line">lxc <span class="token function">file</span> pull microceph-1/var/snap/microceph/current/conf/ceph.keyring ~/
</span><span class="code-line">lxc <span class="token function">file</span> pull microceph-1/var/snap/microceph/current/conf/ceph.conf ~/
</span></code></pre></div><p>, to copy the Ceph config file and keyring to the host machine.</p><p>On the host machine, run</p><div class="relative"><pre><code class="language-shell code-highlight"><span class="code-line"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> ceph-common
</span></code></pre></div><p>, to install <code>ceph-common</code> (if you have not installed it) to use the <code>ceph</code> CLIs.</p><p>Now, you can manage the cluster using the <code>ceph.keyring</code> and <code>ceph.conf</code>.</p><div class="relative"><pre><code class="language-shell code-highlight"><span class="code-line"><span class="token function">sudo</span> ceph <span class="token variable parameter">-s</span> <span class="token variable parameter">-k</span> ~/ceph.keyring <span class="token variable parameter">-c</span> ~/ceph.conf
</span></code></pre></div><h2 class="content-header" id="-clean-up-resources"><a class="break-words" href="#-clean-up-resources" aria-hidden="true" tabindex="-1"><span class="content-header-link"><svg viewBox="0 0 20 20" class="h-5 linkicon w-5" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"></path><path d="M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"></path></svg></span></a>🧹 Clean up resources</h2><p>When you are finished with the testing or learning, you can remove all the resources.</p><p>On the host, run</p><div class="relative"><pre><code class="language-shell code-highlight"><span class="code-line"><span class="token keyword">for</span> <span class="token variable for-or-select">i</span> <span class="token keyword">in</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>
</span><span class="code-line"><span class="token keyword">do</span>
</span><span class="code-line">  lxc delete <span class="token variable parameter">--force</span> microceph-<span class="token variable">$i</span>
</span><span class="code-line">  lxc storage volume delete default microceph-volume-<span class="token variable">$i</span>
</span><span class="code-line"><span class="token keyword">done</span>
</span></code></pre></div><p>If you also installed <code>ceph-common</code>, you can remove it as well.</p><div class="relative"><pre><code class="language-shell code-highlight"><span class="code-line"><span class="token function">sudo</span> <span class="token function">apt</span> remove ceph-common <span class="token variable parameter">--purge</span>
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">apt</span> autoremove  <span class="token comment"># remove the dependency of ceph-common</span>
</span></code></pre></div><hr/><p>🚀 That&#x27;s all for now folks! Hope you enjoy learning Ceph!</p></div><div class="pb-6 pt-6 text-sm text-gray-700 dark:text-gray-300"><a class="break-words" target="_blank" rel="noopener noreferrer" href="https://github.com/chanchiwai-ray/chanchiwai-ray.github.io/blob/main/data/blog/ceph/deploy-three-nodes-microceph.mdx">View on GitHub</a></div><div class="pb-6 pt-6 text-center text-gray-700 dark:text-gray-300" id="comment"><button>Load Comments</button></div></div><footer><div class="divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"><div class="py-4 xl:py-8"><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/ceph">ceph</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/lxd">lxd</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Previous Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a class="break-words" href="/blog/hello-world">Hello World</a></div></div><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Next Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a class="break-words" href="/blog/k8s/deploy-charmed-kubernetes">Setting Up Kubernetes Cluster with Canonical Kubernetes</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" aria-label="Back to the blog" href="/blog">← Back to the blog</a></div></footer></div></div></article></section></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a href="mailto:chanchiwairay@gmail.com" target="_blank" rel="noopener noreferrer" class="text-sm text-gray-500 transition hover:text-gray-600"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-8 w-8"><title>Mail</title><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path></svg></a><a href="https://github.com/chanchiwai-ray" target="_blank" rel="noopener noreferrer" class="text-sm text-gray-500 transition hover:text-gray-600"><span class="sr-only">github</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-8 w-8"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a href="https://www.linkedin.com/in/chi-wai-chan-ba5870137" target="_blank" rel="noopener noreferrer" class="text-sm text-gray-500 transition hover:text-gray-600"><span class="sr-only">linkedin</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-8 w-8"><title>Linkedin</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a></div><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>Chi Wai CHAN</div><div> • </div><div>© 2025</div><div> • </div><a class="break-words" target="_blank" rel="noopener noreferrer" href="https://github.com/chanchiwai-ray/chanchiwai-ray.github.io/issues">Report Issues</a></div></div></footer></section><script src="/_next/static/chunks/webpack-411553d874472be6.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[3894,[\"545\",\"static/chunks/c16f53c3-db36c35b4eab1cc3.js\",\"173\",\"static/chunks/173-cdf34a84fb71192b.js\",\"830\",\"static/chunks/830-c94ab44a0e17ca4a.js\",\"177\",\"static/chunks/app/layout-fed54404a194d21a.js\"],\"ThemeProviders\"]\n3:I[3704,[\"545\",\"static/chunks/c16f53c3-db36c35b4eab1cc3.js\",\"173\",\"static/chunks/173-cdf34a84fb71192b.js\",\"830\",\"static/chunks/830-c94ab44a0e17ca4a.js\",\"177\",\"static/chunks/app/layout-fed54404a194d21a.js\"],\"\"]\n4:I[7969,[\"545\",\"static/chunks/c16f53c3-db36c35b4eab1cc3.js\",\"173\",\"static/chunks/173-cdf34a84fb71192b.js\",\"830\",\"static/chunks/830-c94ab44a0e17ca4a.js\",\"177\",\"static/chunks/app/layout-fed54404a194d21a.js\"],\"KBarSearchProvider\"]\n5:I[8173,[\"173\",\"static/chunks/173-cdf34a84fb71192b.js\",\"970\",\"static/chunks/970-9f18edc3a6e123c8.js\",\"909\",\"static/chunks/app/blog/%5B...slug%5D/page-9b88551e61e607f4.js\"],\"\"]\n6:I[2076,[\"545\",\"static/chunks/c16f53c3-db36c35b4eab1cc3.js\",\"173\",\"static/chunks/173-cdf34a84fb71192b.js\",\"830\",\"static/chunks/830-c94ab44a0e17ca4a.js\",\"177\",\"static/chunks/app/layout-fed54404a194d21a.js\"],\"KBarButton\"]\n7:I[4984,[\"545\",\"static/chunks/c16f53c3-db36c35b4eab1cc3.js\",\"173\",\"static/chunks/173-cdf34a84fb71192b.js\",\"830\",\"static/chunks/830-c94ab44a0e17ca4a.js\",\"177\",\"static/chunks/app/layout-fed54404a194d21a.js\"],\"default\"]\n8:I[1861,[\"545\",\"static/chunks/c16f53c3-db36c35b4eab1cc3.js\",\"173\",\"static/chunks/173-cdf34a84fb71192b.js\",\"830\",\"static/chunks/830-c94ab44a0e17ca4a.js\",\"177\",\"static/chunks/app/layout-fed54404a194d21a.js\"],\"default\"]\n9:I[5244,[],\"\"]\na:I[3866,[],\"\"]\nc:I[6213,[],\"OutletBoundary\"]\ne:I[6213,[],\"MetadataBoundary\"]\n10:I[6213,[],\"ViewportBoundary\"]\n12:I[4835,[],\"\"]\n:HL[\"/_next/static/media/7cba1811e3c25a15-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/ce39e5fd71ac2204.css\",\"style\"]\n:HL[\"/_next/static/css/2d617ddf3705e99d.css\",\"style\"]\n:HL[\"/_next/static/css/10e892855c0ee316.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"quXKR70OA0pU0xaKk9Lpa\",\"p\":\"\",\"c\":[\"\",\"blog\",\"ceph\",\"deploy-three-nodes-microceph\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"ceph/deploy-three-nodes-microceph\",\"c\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/ce39e5fd71ac2204.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/2d617ddf3705e99d.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en-us\",\"className\":\"__variable_bc0dcf scroll-smooth\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"sizes\":\"64x64\",\"href\":\"/static/favicons/favicon-64x64.png\"}],[\"$\",\"meta\",null,{\"name\":\"msapplication-TileColor\",\"content\":\"#000000\"}],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"media\":\"(prefers-color-scheme: light)\",\"content\":\"#fff\"}],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"media\":\"(prefers-color-scheme: dark)\",\"content\":\"#000\"}],[\"$\",\"link\",null,{\"rel\":\"alternate\",\"type\":\"application/rss+xml\",\"href\":\"/feed.xml\"}],[\"$\",\"body\",null,{\"className\":\"bg-white pl-[calc(100vw-100%)] text-black antialiased dark:bg-gray-950 dark:text-white\",\"children\":[\"$\",\"$L2\",null,{\"children\":[[[[\"$\",\"$L3\",null,{\"strategy\":\"lazyOnload\",\"data-domain\":\"\",\"data-api\":\"$undefined\",\"src\":\"\"}],[\"$\",\"$L3\",null,{\"strategy\":\"lazyOnload\",\"id\":\"plausible-script\",\"children\":\"\\n            window.plausible = window.plausible || function() { (window.plausible.q = window.plausible.q || []).push(arguments) }\\n        \"}]],[[\"$\",\"$L3\",null,{\"strategy\":\"lazyOnload\",\"id\":\"sa-script\",\"children\":\"\\n            window.sa_event=window.sa_event||function(){var a=[].slice.call(arguments);window.sa_event.q?window.sa_event.q.push(a):window.sa_event.q=[a]};\\n        \"}],[\"$\",\"$L3\",null,{\"strategy\":\"lazyOnload\",\"src\":\"https://scripts.simpleanalyticscdn.com/latest.js\"}]],[\"$\",\"$L3\",null,{\"strategy\":\"lazyOnload\",\"id\":\"posthog-script\",\"children\":\"\\n          !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(\\\".\\\");2==o.length\u0026\u0026(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement(\\\"script\\\")).type=\\\"text/javascript\\\",p.async=!0,p.src=s.api_host+\\\"/static/array.js\\\",(r=t.getElementsByTagName(\\\"script\\\")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a=\\\"posthog\\\",u.people=u.people||[],u.toString=function(t){var e=\\\"posthog\\\";return\\\"posthog\\\"!==a\u0026\u0026(e+=\\\".\\\"+a),t||(e+=\\\" (stub)\\\"),e},u.people.toString=function(){return u.toString(1)+\\\".people (stub)\\\"},o=\\\"capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags\\\".split(\\\" \\\"),n=0;n\u003co.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);\\n          posthog.init('',{api_host:'https://app.posthog.com'})\\n      \"}],[\"$\",\"$L3\",null,{\"async\":true,\"defer\":true,\"src\":\"https://analytics.umami.is/script.js\"}],[[\"$\",\"$L3\",null,{\"strategy\":\"afterInteractive\",\"src\":\"https://www.googletagmanager.com/gtag/js?id=\"}],[\"$\",\"$L3\",null,{\"strategy\":\"afterInteractive\",\"id\":\"ga-script\",\"children\":\"\\n            window.dataLayer = window.dataLayer || [];\\n            function gtag(){dataLayer.push(arguments);}\\n            gtag('js', new Date());\\n            gtag('config', '');\\n        \"}]],\"$undefined\"],[\"$\",\"section\",null,{\"className\":\"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0\",\"children\":[[\"$\",\"$L4\",null,{\"kbarConfig\":{\"searchDocumentsPath\":\"/search.json\"},\"children\":[[\"$\",\"header\",null,{\"className\":\"flex items-center w-full bg-white dark:bg-gray-950 justify-between py-10 sticky top-0 z-50\",\"children\":[[\"$\",\"$L5\",null,{\"className\":\"break-words\",\"href\":\"/\",\"aria-label\":\"Ray's Blog\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center justify-between\",\"children\":[\"$\",\"div\",null,{\"className\":\"hidden h-6 text-2xl font-semibold sm:block\",\"children\":\"Ray's Blog\"}]}]}],[\"$\",\"div\",null,{\"className\":\"flex items-center space-x-4 leading-5 sm:space-x-6\",\"children\":[[\"$\",\"div\",null,{\"className\":\"no-scrollbar hidden max-w-40 items-center space-x-4 overflow-x-auto pr-2 sm:flex sm:space-x-6 md:max-w-72 lg:max-w-96\",\"children\":[[\"$\",\"$L5\",\"Blog\",{\"className\":\"m-1 block font-medium text-gray-900 hover:text-primary-500 dark:text-gray-100 dark:hover:text-primary-400\",\"href\":\"/blog\",\"children\":\"Blog\"}],[\"$\",\"$L5\",\"Tags\",{\"className\":\"m-1 block font-medium text-gray-900 hover:text-primary-500 dark:text-gray-100 dark:hover:text-primary-400\",\"href\":\"/tags\",\"children\":\"Tags\"}],[\"$\",\"$L5\",\"Projects\",{\"className\":\"m-1 block font-medium text-gray-900 hover:text-primary-500 dark:text-gray-100 dark:hover:text-primary-400\",\"href\":\"/projects\",\"children\":\"Projects\"}],[\"$\",\"$L5\",\"About\",{\"className\":\"m-1 block font-medium text-gray-900 hover:text-primary-500 dark:text-gray-100 dark:hover:text-primary-400\",\"href\":\"/about\",\"children\":\"About\"}]]}],[\"$\",\"$L6\",null,{\"aria-label\":\"Search\",\"children\":[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"fill\":\"none\",\"viewBox\":\"0 0 24 24\",\"strokeWidth\":1.5,\"stroke\":\"currentColor\",\"className\":\"h-6 w-6 text-gray-900 hover:text-primary-500 dark:text-gray-100 dark:hover:text-primary-400\",\"children\":[\"$\",\"path\",null,{\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"d\":\"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z\"}]}]}],[\"$\",\"$L7\",null,{}],[\"$\",\"$L8\",null,{\"headerNavLinks\":[{\"href\":\"/\",\"title\":\"Home\"},{\"href\":\"/blog\",\"title\":\"Blog\"},{\"href\":\"/tags\",\"title\":\"Tags\"},{\"href\":\"/projects\",\"title\":\"Projects\"},{\"href\":\"/about\",\"title\":\"About\"}]}]]}]]}],[\"$\",\"main\",null,{\"className\":\"mb-auto\",\"children\":[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[],[\"$\",\"div\",null,{\"className\":\"flex flex-col items-start justify-start md:mt-24 md:flex-row md:items-center md:justify-center md:space-x-6\",\"children\":[[\"$\",\"div\",null,{\"className\":\"space-x-2 pb-8 pt-6 md:space-y-5\",\"children\":[\"$\",\"h1\",null,{\"className\":\"text-6xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 md:border-r-2 md:px-6 md:text-8xl md:leading-14\",\"children\":\"404\"}]}],[\"$\",\"div\",null,{\"className\":\"max-w-md\",\"children\":[[\"$\",\"p\",null,{\"className\":\"mb-4 text-xl font-bold leading-normal md:text-2xl\",\"children\":\"Sorry we couldn't find this page.\"}],[\"$\",\"p\",null,{\"className\":\"mb-8\",\"children\":\"But dont worry, you can find plenty of other things on our homepage.\"}],[\"$\",\"$L5\",null,{\"className\":\"focus:shadow-outline-blue inline rounded-lg border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium leading-5 text-white shadow transition-colors duration-150 hover:bg-blue-700 focus:outline-none dark:hover:bg-blue-500\",\"href\":\"/\",\"children\":\"Back to homepage\"}]]}]]}]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}],[\"$\",\"footer\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"mt-16 flex flex-col items-center\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-3 flex space-x-4\",\"children\":[null,[\"$\",\"a\",null,{\"href\":\"mailto:chanchiwairay@gmail.com\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"text-sm text-gray-500 transition hover:text-gray-600\",\"children\":[[\"$\",\"span\",null,{\"className\":\"sr-only\",\"children\":\"mail\"}],[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 20 20\",\"className\":\"fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-8 w-8\",\"children\":[[\"$\",\"title\",null,{\"children\":\"Mail\"}],[\"$\",\"path\",null,{\"d\":\"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z\"}],[\"$\",\"path\",null,{\"d\":\"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z\"}]]}]]}],[\"$\",\"a\",null,{\"href\":\"https://github.com/chanchiwai-ray\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"text-sm text-gray-500 transition hover:text-gray-600\",\"children\":[[\"$\",\"span\",null,{\"className\":\"sr-only\",\"children\":\"github\"}],[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 24 24\",\"className\":\"fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-8 w-8\",\"children\":[[\"$\",\"title\",null,{\"children\":\"GitHub\"}],[\"$\",\"path\",null,{\"d\":\"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12\"}]]}]]}],[\"$\",\"a\",null,{\"href\":\"https://www.linkedin.com/in/chi-wai-chan-ba5870137\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"text-sm text-gray-500 transition hover:text-gray-600\",\"children\":[[\"$\",\"span\",null,{\"className\":\"sr-only\",\"children\":\"linkedin\"}],[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 24 24\",\"className\":\"fill-current text-gray-700 hover:text-primary-500 dark:text-gray-200 dark:hover:text-primary-400 h-8 w-8\",\"children\":[[\"$\",\"title\",null,{\"children\":\"Linkedin\"}],[\"$\",\"path\",null,{\"d\":\"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z\"}]]}]]}]]}],[\"$\",\"div\",null,{\"className\":\"mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400\",\"children\":[[\"$\",\"div\",null,{\"children\":\"Chi Wai CHAN\"}],[\"$\",\"div\",null,{\"children\":\" • \"}],[\"$\",\"div\",null,{\"children\":\"© 2025\"}],[\"$\",\"div\",null,{\"children\":\" • \"}],[\"$\",\"a\",null,{\"className\":\"break-words\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://github.com/chanchiwai-ray/chanchiwai-ray.github.io/issues\",\"children\":\"Report Issues\"}]]}]]}]}]]}]]}]}]]}]]}],{\"children\":[\"blog\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"ceph/deploy-three-nodes-microceph\",\"c\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"$0:f:0:1:2:children:2:children:0\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$Lb\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/10e892855c0ee316.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$Lc\",null,{\"children\":\"$Ld\"}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"AQpy6wwYUFCApgS5jek0T\",{\"children\":[[\"$\",\"$Le\",null,{\"children\":\"$Lf\"}],[\"$\",\"$L10\",null,{\"children\":\"$L11\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$12\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"13:I[1674,[\"173\",\"static/chunks/173-cdf34a84fb71192b.js\",\"970\",\"static/chunks/970-9f18edc3a6e123c8.js\",\"909\",\"static/chunks/app/blog/%5B...slug%5D/page-9b88551e61e607f4.js\"],\"default\"]\n14:I[7970,[\"173\",\"static/chunks/173-cdf34a84fb71192b.js\",\"970\",\"static/chunks/970-9f18edc3a6e123c8.js\",\"909\",\"static/chunks/app/blog/%5B...slug%5D/page-9b88551e61e607f4.js\"],\"Image\"]\n15:I[8801,[\"173\",\"static/chunks/173-cdf34a84fb71192b.js\",\"970\",\"static/chunks/970-9f18edc3a6e123c8.js\",\"909\",\"static/chunks/app/blog/%5B...slug%5D/page-9b88551e61e607f4.js\"],\"default\"]\n16:I[4136,[\"173\",\"static/chunks/173-cdf34a84fb71192b.js\",\"970\",\"static/chunks/970-9f18edc3a6e123c8.js\",\"909\",\"static/chunks/app/blog/%5B...slug%5D/page-9b88551e61e607f4.js\"],\"default\"]\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"script\",null,{\"type\":\"application/ld+json\",\"dangerouslySetInnerHTML\":{\"__html\":\"{\\\"@context\\\":\\\"https://schema.org\\\",\\\"@type\\\":\\\"BlogPosting\\\",\\\"headline\\\":\\\"Setting Up Ceph Cluster with MicroCeph\\\",\\\"datePublished\\\":\\\"2025-02-28T00:00:00.000Z\\\",\\\"dateModified\\\":\\\"2025-02-28T00:00:00.000Z\\\",\\\"description\\\":\\\"Learning Ceph can sometimes be difficult due the resources required to set up a Ceph cluster. In this post, I am going demonstrate how you can set up a Ceph cluster on your laptop.\\\",\\\"image\\\":\\\"/static/images/x-card.png\\\",\\\"url\\\":\\\"https://chanchiwai-ray.github.io/blog/ceph/deploy-three-nodes-microceph\\\",\\\"author\\\":[{\\\"@type\\\":\\\"Person\\\",\\\"name\\\":\\\"Chi Wai CHAN\\\"}]}\"}}],[\"$\",\"section\",null,{\"className\":\"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0\",\"children\":[[\"$\",\"$L13\",null,{\"provider\":\"giscus\"}],[\"$\",\"article\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700\",\"children\":[[\"$\",\"header\",null,{\"className\":\"pt-6 xl:pb-6\",\"children\":[\"$\",\"div\",null,{\"className\":\"space-y-1 text-center\",\"children\":[[\"$\",\"dl\",null,{\"className\":\"space-y-10\",\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"dt\",null,{\"className\":\"sr-only\",\"children\":\"Published on\"}],[\"$\",\"dd\",null,{\"className\":\"text-base font-medium leading-6 text-gray-500 dark:text-gray-400\",\"children\":[\"$\",\"time\",null,{\"dateTime\":\"2025-02-28T00:00:00.000Z\",\"children\":\"Friday, February 28, 2025\"}]}]]}]}],[\"$\",\"div\",null,{\"children\":[\"$\",\"h1\",null,{\"className\":\"text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14\",\"children\":\"Setting Up Ceph Cluster with MicroCeph\"}]}]]}]}],[\"$\",\"div\",null,{\"className\":\"grid-rows-[auto_1fr] divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0\",\"children\":[[\"$\",\"dl\",null,{\"className\":\"pb-10 pt-6 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700\",\"children\":[[\"$\",\"dt\",null,{\"className\":\"sr-only\",\"children\":\"Authors\"}],[\"$\",\"dd\",null,{\"children\":[\"$\",\"ul\",null,{\"className\":\"flex flex-wrap justify-center gap-4 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8\",\"children\":[[\"$\",\"li\",\"Chi Wai CHAN\",{\"className\":\"flex items-center space-x-2\",\"children\":[[\"$\",\"$L14\",null,{\"src\":\"/static/images/avatar.png\",\"width\":38,\"height\":38,\"alt\":\"avatar\",\"className\":\"h-10 w-10 rounded-full\"}],[\"$\",\"dl\",null,{\"className\":\"whitespace-nowrap text-sm font-medium leading-5\",\"children\":[[\"$\",\"dt\",null,{\"className\":\"sr-only\",\"children\":\"Name\"}],[\"$\",\"dd\",null,{\"className\":\"text-gray-900 dark:text-gray-100\",\"children\":\"Chi Wai CHAN\"}],[\"$\",\"dt\",null,{\"className\":\"sr-only\",\"children\":\"Linkedin and GitHub\"}],[\"$\",\"dd\",null,{\"children\":[[\"$\",\"a\",null,{\"className\":\"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.linkedin.com/in/chi-wai-chan-ba5870137\",\"children\":\"@Linkedin\"}],\" • \",[\"$\",\"a\",null,{\"className\":\"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://github.com/chanchiwai-ray\",\"children\":\"@Github\"}]]}]]}]]}]]}]}]]}],[\"$\",\"div\",null,{\"className\":\"divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0\",\"children\":[[\"$\",\"div\",null,{\"className\":\"prose max-w-none pb-8 pt-10 dark:prose-invert\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"content-header\",\"id\":\"-introduction\",\"children\":[[\"$\",\"a\",null,{\"className\":\"break-words\",\"href\":\"#-introduction\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"content-header-link\",\"children\":[\"$\",\"svg\",null,{\"viewBox\":\"0 0 20 20\",\"className\":\"h-5 linkicon w-5\",\"fill\":\"currentColor\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}],[\"$\",\"path\",null,{\"d\":\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"}]]}]}]}],\"🌟 Introduction\"]}],[\"$\",\"p\",null,{\"children\":[\"Learning Ceph can sometimes be difficult due the \",[\"$\",\"a\",null,{\"className\":\"break-words\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://docs.ceph.com/en/latest/start/hardware-recommendations/#minimum-hardware-recommendations\",\"children\":\"resources\"}],\" required to set up a Ceph cluster. However, thanks to creation of \",[\"$\",\"a\",null,{\"className\":\"break-words\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://documentation.ubuntu.com/lxd/en/latest/\",\"children\":\"LXD\"}],\" and \",[\"$\",\"a\",null,{\"className\":\"break-words\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://canonical-microceph.readthedocs-hosted.com/en/latest/\",\"children\":\"MicroCeph\"}],\", we now have a way to create multi-node Ceph cluster with limited resources.\"]}],[\"$\",\"p\",null,{\"children\":[\"In this post, I am going to show you how to set up a Ceph cluster on you local desktop or laptop for \",[\"$\",\"strong\",null,{\"children\":\"testing or learning\"}],\" purpose.\"]}],[\"$\",\"div\",null,{\"className\":\"markdown-alert markdown-alert-warning\",\"dir\":\"auto\",\"children\":[[\"$\",\"p\",null,{\"className\":\"markdown-alert-title\",\"dir\":\"auto\",\"children\":[[\"$\",\"svg\",null,{\"viewBox\":\"0 0 16 16\",\"aria-hidden\":\"true\",\"className\":\"octicon\",\"height\":\"16\",\"width\":\"16\",\"children\":[\"$\",\"path\",null,{\"d\":\"M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z\"}]}],\"WARNING\"]}],[\"$\",\"p\",null,{\"children\":\"Do not use it for production! This is not a tutorial for setting up a production grade Ceph cluster!\"}]]}],[\"$\",\"ul\",null,{\"className\":\"\",\"children\":[[\"$\",\"li\",\"0\",{\"className\":\"\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#-introduction\",\"children\":\"🌟 Introduction\"}],null]}],[\"$\",\"li\",\"1\",{\"className\":\"\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#-prerequisite\",\"children\":\"🪨 Prerequisite\"}],null]}],[\"$\",\"li\",\"2\",{\"className\":\"\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#-getting-started\",\"children\":\"🚀 Getting Started\"}],[\"$\",\"ul\",null,{\"className\":\"\",\"children\":[[\"$\",\"li\",\"0\",{\"className\":\"\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#-create-block-storage\",\"children\":\"💿 Create block storage\"}],null]}],[\"$\",\"li\",\"1\",{\"className\":\"\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#-create-lxd-virtual-machines\",\"children\":\"💻 Create LXD virtual machines\"}],null]}],[\"$\",\"li\",\"2\",{\"className\":\"\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#-attach-volume-disk-to-lxd-virtual-machines\",\"children\":\"🔗 Attach volume (disk) to LXD virtual machines\"}],null]}],[\"$\",\"li\",\"3\",{\"className\":\"\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#-install-microceph\",\"children\":\"🌎 Install MicroCeph\"}],null]}],[\"$\",\"li\",\"4\",{\"className\":\"\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#-bootstrap-microceph-cluster\",\"children\":\"👢 Bootstrap MicroCeph cluster\"}],null]}],[\"$\",\"li\",\"5\",{\"className\":\"\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#-add-disks-to-microceph-cluster\",\"children\":\"💽 Add disks to MicroCeph cluster\"}],null]}],[\"$\",\"li\",\"6\",{\"className\":\"\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#-check-the-status-of-microceph-cluster\",\"children\":\"💡 Check the status of MicroCeph cluster\"}],null]}],[\"$\",\"li\",\"7\",{\"className\":\"\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#-manage-the-microceph-cluster\",\"children\":\"🧙 Manage the MicroCeph cluster\"}],null]}]]}]]}],[\"$\",\"li\",\"3\",{\"className\":\"\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#-clean-up-resources\",\"children\":\"🧹 Clean up resources\"}],null]}]]}],[\"$\",\"h2\",null,{\"className\":\"content-header\",\"id\":\"-prerequisite\",\"children\":[[\"$\",\"a\",null,{\"className\":\"break-words\",\"href\":\"#-prerequisite\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"content-header-link\",\"children\":[\"$\",\"svg\",null,{\"viewBox\":\"0 0 20 20\",\"className\":\"h-5 linkicon w-5\",\"fill\":\"currentColor\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}],[\"$\",\"path\",null,{\"d\":\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"}]]}]}]}],\"🪨 Prerequisite\"]}],[\"$\",\"p\",null,{\"children\":\"Before you continue with the tutorial, please make sure that you have met the following software or hardware requirements. You can follow the link to install and initialize the software required for this tutorial.\"}],[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"className\":\"break-words\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://documentation.ubuntu.com/lxd/en/latest/\",\"children\":\"LXD\"}]}],[\"$\",\"li\",null,{\"children\":\"About 8 vCPUs\"}],[\"$\",\"li\",null,{\"children\":\"About 8 GiB of RAMs\"}],[\"$\",\"li\",null,{\"children\":\"(optional) Some additional disk(s) on the host\"}]]}],[\"$\",\"p\",null,{\"children\":\"The hardware requirements are not strict, you should still be able to complete the deployment with a less powerful machine. Also, you don't necessarily need to have additional disks If you have enough storage for the host.\"}],[\"$\",\"h2\",null,{\"className\":\"content-header\",\"id\":\"-getting-started\",\"children\":[[\"$\",\"a\",null,{\"className\":\"break-words\",\"href\":\"#-getting-started\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"content-header-link\",\"children\":[\"$\",\"svg\",null,{\"viewBox\":\"0 0 20 20\",\"className\":\"h-5 linkicon w-5\",\"fill\":\"currentColor\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}],[\"$\",\"path\",null,{\"d\":\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"}]]}]}]}],\"🚀 Getting Started\"]}],[\"$\",\"p\",null,{\"children\":\"The tutorial will set up 3 LXD VMs with one root disk and one extra disk, and each disk will have 10 GiB of storage. Each VMs will need 2 vCPUs and 2 GiB of RAMs.\"}],[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",null,{\"children\":[\"microceph-1\",[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",null,{\"children\":\"1 root disk of 10 GiB\"}],[\"$\",\"li\",null,{\"children\":\"1 extra disk of 10 GiB\"}],[\"$\",\"li\",null,{\"children\":\"2 vCPUs\"}],[\"$\",\"li\",null,{\"children\":\"2 GiB of RAMs\"}]]}]]}],[\"$\",\"li\",null,{\"children\":[\"microceph-2\",[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",null,{\"children\":\"1 root disk of 10 GiB\"}],[\"$\",\"li\",null,{\"children\":\"1 extra disk of 10 GiB\"}],[\"$\",\"li\",null,{\"children\":\"2 vCPUs\"}],[\"$\",\"li\",null,{\"children\":\"2 GiB of RAMs\"}]]}]]}],[\"$\",\"li\",null,{\"children\":[\"microceph-3\",[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",null,{\"children\":\"1 root disk of 10 GiB\"}],[\"$\",\"li\",null,{\"children\":\"1 extra disk of 10 GiB\"}],[\"$\",\"li\",null,{\"children\":\"2 vCPUs\"}],[\"$\",\"li\",null,{\"children\":\"2 GiB of RAMs\"}]]}]]}]]}],[\"$\",\"h3\",null,{\"className\":\"content-header\",\"id\":\"-create-block-storage\",\"children\":[[\"$\",\"a\",null,{\"className\":\"break-words\",\"href\":\"#-create-block-storage\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"content-header-link\",\"children\":[\"$\",\"svg\",null,{\"viewBox\":\"0 0 20 20\",\"className\":\"h-5 linkicon w-5\",\"fill\":\"currentColor\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}],[\"$\",\"path\",null,{\"d\":\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"}]]}]}]}],\"💿 Create block storage\"]}],[\"$\",\"p\",null,{\"children\":\"First, we need to create the extra disks for each VMs.\"}],[\"$\",\"$L15\",null,{\"className\":\"language-shell\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"for\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token variable for-or-select\",\"children\":\"i\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"in\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"3\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"do\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  lxc storage volume create default \",[\"$\",\"span\",null,{\"className\":\"token variable parameter\",\"children\":\"--type\"}],\" block microceph-volume-\",[\"$\",\"span\",null,{\"className\":\"token variable\",\"children\":\"$$i\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token variable assign-left\",\"children\":\"size\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\"10GiB\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"done\"}],\"\\n\"]}]]}]}],[\"$\",\"p\",null,{\"children\":[\"This creates 3 block devices on the \",[\"$\",\"code\",null,{\"children\":\"default\"}],\" storage pool, and each block device has a size of 10 GiB.\"]}],[\"$\",\"div\",null,{\"className\":\"markdown-alert markdown-alert-note\",\"dir\":\"auto\",\"children\":[[\"$\",\"p\",null,{\"className\":\"markdown-alert-title\",\"dir\":\"auto\",\"children\":[[\"$\",\"svg\",null,{\"viewBox\":\"0 0 16 16\",\"aria-hidden\":\"true\",\"className\":\"octicon\",\"height\":\"16\",\"width\":\"16\",\"children\":[\"$\",\"path\",null,{\"d\":\"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z\"}]}],\"NOTE\"]}],[\"$\",\"p\",null,{\"children\":[\"If you are using an extra disk, you can configure a storage pool on that extra disk, and create volumes on that storage pool. For more information, see \",[\"$\",\"a\",null,{\"className\":\"break-words\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://documentation.ubuntu.com/lxd/en/latest/howto/storage_pools\",\"children\":\"https://documentation.ubuntu.com/lxd/en/latest/howto/storage_pools\"}],\".\"]}]]}],[\"$\",\"p\",null,{\"children\":\"To verify if the block devices have been created, run\"}],[\"$\",\"$L15\",null,{\"className\":\"language-shell\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"$$ lxc storage volume list\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"+---------+-----------+--------------------+-------------+--------------+---------+\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\"  POOL   \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\"   TYPE    \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\"        NAME        \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" DESCRIPTION \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" CONTENT-TYPE \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" USED BY \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"+---------+-----------+--------------------+-------------+--------------+---------+\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" default \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" custom    \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" microceph-volume-1 \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\"             \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" block        \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}],\"       \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"+---------+-----------+--------------------+-------------+--------------+---------+\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" default \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" custom    \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" microceph-volume-2 \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\"             \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" block        \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}],\"       \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"+---------+-----------+--------------------+-------------+--------------+---------+\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" default \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" custom    \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" microceph-volume-3 \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\"             \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" block        \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}],\"       \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"+---------+-----------+--------------------+-------------+--------------+---------+\\n\"}]]}]}],[\"$\",\"p\",null,{\"children\":\", and you should see something like that.\"}],[\"$\",\"h3\",null,{\"className\":\"content-header\",\"id\":\"-create-lxd-virtual-machines\",\"children\":[[\"$\",\"a\",null,{\"className\":\"break-words\",\"href\":\"#-create-lxd-virtual-machines\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"content-header-link\",\"children\":[\"$\",\"svg\",null,{\"viewBox\":\"0 0 20 20\",\"className\":\"h-5 linkicon w-5\",\"fill\":\"currentColor\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}],[\"$\",\"path\",null,{\"d\":\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"}]]}]}]}],\"💻 Create LXD virtual machines\"]}],[\"$\",\"p\",null,{\"children\":\"Next, we need to create 3 LXD VMs.\"}],[\"$\",\"$L15\",null,{\"className\":\"language-shell\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"for\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token variable for-or-select\",\"children\":\"i\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"in\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"3\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"do\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  lxc launch ubuntu:24.04 microceph-\",[\"$\",\"span\",null,{\"className\":\"token variable\",\"children\":\"$$i\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token variable parameter\",\"children\":\"--vm\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token variable parameter\",\"children\":\"-c\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token variable assign-left\",\"children\":\"limits.cpu\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token variable parameter\",\"children\":\"-c\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token variable assign-left\",\"children\":\"limits.memory\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\"2GiB \",[\"$\",\"span\",null,{\"className\":\"token variable parameter\",\"children\":\"-d\"}],\" root,size\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\"10GiB\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"done\"}],\"\\n\"]}]]}]}],[\"$\",\"p\",null,{\"children\":\"This creates 3 Ubuntu@24.04 LXD VMs with 2 cpus, 2 GiB of memory, and a root disk of 10GiB. You can adjust the number of cpu, memory, and disks depending on the resources you have.\"}],[\"$\",\"p\",null,{\"children\":\"To verify if the VMs have been created, run\"}],[\"$\",\"$L15\",null,{\"className\":\"language-shell\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"$$ lxc list\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"+---------------+---------+-----------------------+------+-----------------+-----------+\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\"     NAME      \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\"  STATE  \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\"         IPV4          \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" IPV6 \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\"      TYPE       \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" SNAPSHOTS \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"+---------------+---------+-----------------------+------+-----------------+-----------+\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" microceph-1   \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" RUNNING \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"10.42\"}],\".75.215 \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"enp5s0\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\"      \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" VIRTUAL-MACHINE \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}],\"         \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"+---------------+---------+-----------------------+------+-----------------+-----------+\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" microceph-2   \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" RUNNING \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"10.42\"}],\".75.5 \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"enp5s0\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"   \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\"      \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" VIRTUAL-MACHINE \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}],\"         \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"+---------------+---------+-----------------------+------+-----------------+-----------+\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" microceph-3   \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" RUNNING \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"10.42\"}],\".75.75 \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"enp5s0\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"  \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\"      \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" VIRTUAL-MACHINE \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}],\"         \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"|\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"+---------------+---------+-----------------------+------+-----------------+-----------+\\n\"}]]}]}],[\"$\",\"p\",null,{\"children\":\", and you see something like that.\"}],[\"$\",\"h3\",null,{\"className\":\"content-header\",\"id\":\"-attach-volume-disk-to-lxd-virtual-machines\",\"children\":[[\"$\",\"a\",null,{\"className\":\"break-words\",\"href\":\"#-attach-volume-disk-to-lxd-virtual-machines\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"content-header-link\",\"children\":[\"$\",\"svg\",null,{\"viewBox\":\"0 0 20 20\",\"className\":\"h-5 linkicon w-5\",\"fill\":\"currentColor\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}],[\"$\",\"path\",null,{\"d\":\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"}]]}]}]}],\"🔗 Attach volume (disk) to LXD virtual machines\"]}],[\"$\",\"p\",null,{\"children\":\"Next, we need to attach the volumes to the virtual machines, so that the virtual machines have one extra disk for the OSD.\"}],[\"$\",\"$L15\",null,{\"className\":\"language-shell\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"for\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token variable for-or-select\",\"children\":\"i\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"in\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"3\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"do\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  lxc storage volume attach default microceph-volume-\",[\"$\",\"span\",null,{\"className\":\"token variable\",\"children\":\"$$i\"}],\" microceph-\",[\"$\",\"span\",null,{\"className\":\"token variable\",\"children\":\"$$i\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"done\"}],\"\\n\"]}]]}]}],[\"$\",\"p\",null,{\"children\":\"To verify if the VM has one extra disk, run\"}],[\"$\",\"$L15\",null,{\"className\":\"language-text\",\"children\":[\"$\",\"code\",null,{\"className\":\"code-highlight language-text\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"$$ lxc exec microceph-1 -- lsblk\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"NAME    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"sda       8:0    0   10G  0 disk\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"├─sda1    8:1    0    9G  0 part /\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"├─sda14   8:14   0    4M  0 part\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"├─sda15   8:15   0  106M  0 part /boot/efi\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"└─sda16 259:0    0  913M  0 part /boot\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"sdb       8:16   0   10G  0 disk\\n\"}]]}]}],[\"$\",\"p\",null,{\"children\":[\". This will run a \",[\"$\",\"code\",null,{\"children\":\"lsblk\"}],\" command on node \",[\"$\",\"code\",null,{\"children\":\"microceph-1\"}],\". Note that \",[\"$\",\"code\",null,{\"children\":\"/dev/sdb\"}],\" is the attached volume. You can verify the disk on the other nodes by repeating the same command.\"]}],[\"$\",\"h3\",null,{\"className\":\"content-header\",\"id\":\"-install-microceph\",\"children\":[[\"$\",\"a\",null,{\"className\":\"break-words\",\"href\":\"#-install-microceph\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"content-header-link\",\"children\":[\"$\",\"svg\",null,{\"viewBox\":\"0 0 20 20\",\"className\":\"h-5 linkicon w-5\",\"fill\":\"currentColor\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}],[\"$\",\"path\",null,{\"d\":\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"}]]}]}]}],\"🌎 Install MicroCeph\"]}],[\"$\",\"p\",null,{\"children\":\"Next, we need to install MicroCeph on each node.\"}],[\"$\",\"$L15\",null,{\"className\":\"language-shell\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"for\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token variable for-or-select\",\"children\":\"i\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"in\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"3\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"do\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  lxc \",[\"$\",\"span\",null,{\"className\":\"token builtin class-name\",\"children\":\"exec\"}],\" microceph-\",[\"$\",\"span\",null,{\"className\":\"token variable\",\"children\":\"$$i\"}],\" -- snap \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"install\"}],\" microceph \",[\"$\",\"span\",null,{\"className\":\"token variable parameter\",\"children\":\"--channel\"}],\" squid/stable\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"done\"}],\"\\n\"]}]]}]}],[\"$\",\"p\",null,{\"children\":[\"This will install MicroCeph from \",[\"$\",\"code\",null,{\"children\":\"squid/stable\"}],\" channel on each node.\"]}],[\"$\",\"h3\",null,{\"className\":\"content-header\",\"id\":\"-bootstrap-microceph-cluster\",\"children\":[[\"$\",\"a\",null,{\"className\":\"break-words\",\"href\":\"#-bootstrap-microceph-cluster\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"content-header-link\",\"children\":[\"$\",\"svg\",null,{\"viewBox\":\"0 0 20 20\",\"className\":\"h-5 linkicon w-5\",\"fill\":\"currentColor\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}],[\"$\",\"path\",null,{\"d\":\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"}]]}]}]}],\"👢 Bootstrap MicroCeph cluster\"]}],[\"$\",\"div\",null,{\"className\":\"markdown-alert markdown-alert-note\",\"dir\":\"auto\",\"children\":[[\"$\",\"p\",null,{\"className\":\"markdown-alert-title\",\"dir\":\"auto\",\"children\":[[\"$\",\"svg\",null,{\"viewBox\":\"0 0 16 16\",\"aria-hidden\":\"true\",\"className\":\"octicon\",\"height\":\"16\",\"width\":\"16\",\"children\":[\"$\",\"path\",null,{\"d\":\"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z\"}]}],\"NOTE\"]}],[\"$\",\"p\",null,{\"children\":[\"You can use \",[\"$\",\"code\",null,{\"children\":\"lxc exec \u003cnode-name\u003e -- su ubuntu\"}],\" to login to each node as \",[\"$\",\"code\",null,{\"children\":\"ubuntu\"}],\" user\"]}]]}],[\"$\",\"p\",null,{\"children\":[\"On node \",[\"$\",\"code\",null,{\"children\":\"microceph-1\"}],\", initialize the MicroCeph cluster by running:\"]}],[\"$\",\"$L15\",null,{\"className\":\"language-shell\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"sudo\"}],\" microceph cluster bootstrap\\n\"]}]}]}],[\"$\",\"p\",null,{\"children\":[\"Then, generate the registration tokens for \",[\"$\",\"code\",null,{\"children\":\"microceph-2\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"microceph-3\"}],\" by running the following commands:\"]}],[\"$\",\"$L15\",null,{\"className\":\"language-shell\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"sudo\"}],\" microceph cluster \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"add\"}],\" microceph-2\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token variable assign-left\",\"children\":\"eyJzZWNyZXQiOiJjYzhhZWFlM2NiN2JiM2JjM2VmZTg4MzNjZTA1YTgxMjcxZDg3MjdhZGZhZWExZGZiNmE4MzA3MDdhNzNiYzhlIiwiZmluZ2VycHJpbnQiOiI5YWE5MDljMTY3MjM2ZmI4OGU3NmI4OWRlN2NjYTRhNzc5OTQwOWNkZDE1MzgxMGQzMjJmYzFiNjE1OTdiODU4Iiwiam9pbl9hZGRyZXNzZXMiOlsiMTAuNDIuNzUuMjE1Ojc0NDMiXX0\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"sudo\"}],\" microceph cluster \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"add\"}],\" microceph-3\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token variable assign-left\",\"children\":\"eyJzZWNyZXQiOiJiMDFiZTAxZjFkOTVlN2JmOWMwYTM1Mzg2ZWQ1ZTg2NzMxNzdhYTRhYzlkYzQ5N2Q0MmI2NTNkNzRmOTczNTg1IiwiZmluZ2VycHJpbnQiOiI5YWE5MDljMTY3MjM2ZmI4OGU3NmI4OWRlN2NjYTRhNzc5OTQwOWNkZDE1MzgxMGQzMjJmYzFiNjE1OTdiODU4Iiwiam9pbl9hZGRyZXNzZXMiOlsiMTAuNDIuNzUuMjE1Ojc0NDMiXX0\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\"\\n\"]}]]}]}],[\"$\",\"p\",null,{\"children\":[\"Next, you can add node \",[\"$\",\"code\",null,{\"children\":\"microceph-2\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"microceph-3\"}],\" to the cluster using the registration tokens.\"]}],[\"$\",\"p\",null,{\"children\":[\"On \",[\"$\",\"code\",null,{\"children\":\"microceph-2\"}],\", add the node to the cluster by running:\"]}],[\"$\",\"$L15\",null,{\"className\":\"language-shell\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"sudo\"}],\" microceph cluster \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"join\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token variable assign-left\",\"children\":\"eyJzZWNyZXQiOiJjYzhhZWFlM2NiN2JiM2JjM2VmZTg4MzNjZTA1YTgxMjcxZDg3MjdhZGZhZWExZGZiNmE4MzA3MDdhNzNiYzhlIiwiZmluZ2VycHJpbnQiOiI5YWE5MDljMTY3MjM2ZmI4OGU3NmI4OWRlN2NjYTRhNzc5OTQwOWNkZDE1MzgxMGQzMjJmYzFiNjE1OTdiODU4Iiwiam9pbl9hZGRyZXNzZXMiOlsiMTAuNDIuNzUuMjE1Ojc0NDMiXX0\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\"\\n\"]}]}]}],[\"$\",\"p\",null,{\"children\":[\"On \",[\"$\",\"code\",null,{\"children\":\"microceph-3\"}],\", add the node to the cluster by running:\"]}],[\"$\",\"$L15\",null,{\"className\":\"language-shell\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"sudo\"}],\" microceph cluster \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"join\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token variable assign-left\",\"children\":\"eyJzZWNyZXQiOiJiMDFiZTAxZjFkOTVlN2JmOWMwYTM1Mzg2ZWQ1ZTg2NzMxNzdhYTRhYzlkYzQ5N2Q0MmI2NTNkNzRmOTczNTg1IiwiZmluZ2VycHJpbnQiOiI5YWE5MDljMTY3MjM2ZmI4OGU3NmI4OWRlN2NjYTRhNzc5OTQwOWNkZDE1MzgxMGQzMjJmYzFiNjE1OTdiODU4Iiwiam9pbl9hZGRyZXNzZXMiOlsiMTAuNDIuNzUuMjE1Ojc0NDMiXX0\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\"\\n\"]}]}]}],[\"$\",\"h3\",null,{\"className\":\"content-header\",\"id\":\"-add-disks-to-microceph-cluster\",\"children\":[[\"$\",\"a\",null,{\"className\":\"break-words\",\"href\":\"#-add-disks-to-microceph-cluster\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"content-header-link\",\"children\":[\"$\",\"svg\",null,{\"viewBox\":\"0 0 20 20\",\"className\":\"h-5 linkicon w-5\",\"fill\":\"currentColor\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}],[\"$\",\"path\",null,{\"d\":\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"}]]}]}]}],\"💽 Add disks to MicroCeph cluster\"]}],[\"$\",\"p\",null,{\"children\":[\"Initially, the MicroCeph cluster is bootstrapped without disks (i.e. no OSDs), you will need to add the free disk that we have attached in the \",[\"$\",\"a\",null,{\"className\":\"break-words\",\"href\":\"#attach-volume-disk-to-lxd-virtual-machines\",\"children\":\"previous step\"}]]}],[\"$\",\"p\",null,{\"children\":[\"On each of the nodes \",[\"$\",\"code\",null,{\"children\":\"microceph-1\"}],\", \",[\"$\",\"code\",null,{\"children\":\"microceph-2\"}],\", and \",[\"$\",\"code\",null,{\"children\":\"microceph-3\"}],\", run\"]}],[\"$\",\"$L15\",null,{\"className\":\"language-shell\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"sudo\"}],\" microceph disk \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"add\"}],\" /dev/sdb \",[\"$\",\"span\",null,{\"className\":\"token variable parameter\",\"children\":\"--wipe\"}],\"  \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"# Note, you might need to change the device name if you have a different device name\"}],\"\\n\"]}]}]}],[\"$\",\"p\",null,{\"children\":[\". This will configure the device \",[\"$\",\"code\",null,{\"children\":\"/dev/sdb\"}],\" to be the OSD, and wipe all the data on that device. (Note, it is safe to wipe the device since you've just created it, but if you are reusing volumes from other projects, please make sure to backup the data.)\"]}],[\"$\",\"h3\",null,{\"className\":\"content-header\",\"id\":\"-check-the-status-of-microceph-cluster\",\"children\":[[\"$\",\"a\",null,{\"className\":\"break-words\",\"href\":\"#-check-the-status-of-microceph-cluster\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"content-header-link\",\"children\":[\"$\",\"svg\",null,{\"viewBox\":\"0 0 20 20\",\"className\":\"h-5 linkicon w-5\",\"fill\":\"currentColor\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}],[\"$\",\"path\",null,{\"d\":\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"}]]}]}]}],\"💡 Check the status of MicroCeph cluster\"]}],[\"$\",\"p\",null,{\"children\":[\"Finally, we've deployed the MicroCeph cluster, and you can now verify the deployment status using \",[\"$\",\"code\",null,{\"children\":\"microceph\"}],\" command.\"]}],[\"$\",\"p\",null,{\"children\":[\"On \",[\"$\",\"strong\",null,{\"children\":\"any\"}],\" of the nodes \",[\"$\",\"code\",null,{\"children\":\"microceph-1\"}],\", \",[\"$\",\"code\",null,{\"children\":\"microceph-2\"}],\", and \",[\"$\",\"code\",null,{\"children\":\"microceph-3\"}],\", run\"]}],[\"$\",\"$L15\",null,{\"className\":\"language-shell\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"sudo\"}],\" microceph status\\n\"]}]}]}],[\"$\",\"p\",null,{\"children\":\"This will show you the status of the MicroCeph cluster, and you should see something like this:\"}],[\"$\",\"$L15\",null,{\"className\":\"language-text\",\"children\":[\"$\",\"code\",null,{\"className\":\"code-highlight language-text\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"MicroCeph deployment summary:\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"- microceph-1 (10.42.75.215)\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"  Services: mds, mgr, mon, osd\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"  Disks: 1\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"- microceph-2 (10.42.75.5)\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"  Services: mds, mgr, mon, osd\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"  Disks: 1\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"- microceph-3 (10.42.75.75)\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"  Services: mds, mgr, mon, osd\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"  Disks: 1\\n\"}]]}]}],[\"$\",\"h3\",null,{\"className\":\"content-header\",\"id\":\"-manage-the-microceph-cluster\",\"children\":[[\"$\",\"a\",null,{\"className\":\"break-words\",\"href\":\"#-manage-the-microceph-cluster\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"content-header-link\",\"children\":[\"$\",\"svg\",null,{\"viewBox\":\"0 0 20 20\",\"className\":\"h-5 linkicon w-5\",\"fill\":\"currentColor\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}],[\"$\",\"path\",null,{\"d\":\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"}]]}]}]}],\"🧙 Manage the MicroCeph cluster\"]}],[\"$\",\"p\",null,{\"children\":[\"You can manage the cluster with the \",[\"$\",\"code\",null,{\"children\":\"ceph\"}],\" tool itself. MicroCeph also have a subcommand to access the \",[\"$\",\"code\",null,{\"children\":\"ceph\"}],\" tool.\"]}],[\"$\",\"p\",null,{\"children\":[\"On \",[\"$\",\"strong\",null,{\"children\":\"any\"}],\" of the node \",[\"$\",\"code\",null,{\"children\":\"microceph-1\"}],\", \",[\"$\",\"code\",null,{\"children\":\"microceph-2\"}],\", and \",[\"$\",\"code\",null,{\"children\":\"microceph-3\"}],\", run\"]}],[\"$\",\"$L15\",null,{\"className\":\"language-shell\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"sudo\"}],\" microceph.ceph \",[\"$\",\"span\",null,{\"className\":\"token variable parameter\",\"children\":\"-s\"}],\"\\n\"]}]}]}],[\"$\",\"p\",null,{\"children\":\"This will show you the status of the Ceph cluster, and you should see something like this:\"}],[\"$\",\"$L15\",null,{\"className\":\"language-text\",\"children\":[\"$\",\"code\",null,{\"className\":\"code-highlight language-text\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"$$ sudo microceph.ceph -s\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"  cluster:\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"    id:     c2a1abab-bfb7-4683-a14b-93713d75fc99\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"    health: HEALTH_OK\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"  services:\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"    mon: 3 daemons, quorum microceph-1,microceph-2,microceph-3 (age 24m)\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"    mgr: microceph-1(active, since 38m), standbys: microceph-2, microceph-3\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"    osd: 3 osds: 3 up (since 11m), 3 in (since 11m)\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"  data:\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"    pools:   1 pools, 1 pgs\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"    objects: 2 objects, 577 KiB\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"    usage:   83 MiB used, 30 GiB / 30 GiB avail\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"    pgs:     1 active+clean\\n\"}]]}]}],[\"$\",\"p\",null,{\"children\":[\"Alternatively, you can also manage the cluster from your host machine. To do that, you will need to copy the \",[\"$\",\"code\",null,{\"children\":\"ceph.conf\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"ceph.keyring\"}],\" to the host machine.\"]}],[\"$\",\"p\",null,{\"children\":\"On the host machine, run\"}],[\"$\",\"$L15\",null,{\"className\":\"language-shell\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"lxc \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"file\"}],\" pull microceph-1/var/snap/microceph/current/conf/ceph.keyring ~/\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"lxc \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"file\"}],\" pull microceph-1/var/snap/microceph/current/conf/ceph.conf ~/\\n\"]}]]}]}],[\"$\",\"p\",null,{\"children\":\", to copy the Ceph config file and keyring to the host machine.\"}],[\"$\",\"p\",null,{\"children\":\"On the host machine, run\"}],[\"$\",\"$L15\",null,{\"className\":\"language-shell\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"sudo\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"apt\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"install\"}],\" ceph-common\\n\"]}]}]}],[\"$\",\"p\",null,{\"children\":[\", to install \",[\"$\",\"code\",null,{\"children\":\"ceph-common\"}],\" (if you have not installed it) to use the \",[\"$\",\"code\",null,{\"children\":\"ceph\"}],\" CLIs.\"]}],[\"$\",\"p\",null,{\"children\":[\"Now, you can manage the cluster using the \",[\"$\",\"code\",null,{\"children\":\"ceph.keyring\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"ceph.conf\"}],\".\"]}],[\"$\",\"$L15\",null,{\"className\":\"language-shell\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"sudo\"}],\" ceph \",[\"$\",\"span\",null,{\"className\":\"token variable parameter\",\"children\":\"-s\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token variable parameter\",\"children\":\"-k\"}],\" ~/ceph.keyring \",[\"$\",\"span\",null,{\"className\":\"token variable parameter\",\"children\":\"-c\"}],\" ~/ceph.conf\\n\"]}]}]}],[\"$\",\"h2\",null,{\"className\":\"content-header\",\"id\":\"-clean-up-resources\",\"children\":[[\"$\",\"a\",null,{\"className\":\"break-words\",\"href\":\"#-clean-up-resources\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"content-header-link\",\"children\":[\"$\",\"svg\",null,{\"viewBox\":\"0 0 20 20\",\"className\":\"h-5 linkicon w-5\",\"fill\":\"currentColor\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"}],[\"$\",\"path\",null,{\"d\":\"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"}]]}]}]}],\"🧹 Clean up resources\"]}],[\"$\",\"p\",null,{\"children\":\"When you are finished with the testing or learning, you can remove all the resources.\"}],[\"$\",\"p\",null,{\"children\":\"On the host, run\"}],[\"$\",\"$L15\",null,{\"className\":\"language-shell\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"for\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token variable for-or-select\",\"children\":\"i\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"in\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"3\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"do\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  lxc delete \",[\"$\",\"span\",null,{\"className\":\"token variable parameter\",\"children\":\"--force\"}],\" microceph-\",[\"$\",\"span\",null,{\"className\":\"token variable\",\"children\":\"$$i\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  lxc storage volume delete default microceph-volume-\",[\"$\",\"span\",null,{\"className\":\"token variable\",\"children\":\"$$i\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"done\"}],\"\\n\"]}]]}]}],[\"$\",\"p\",null,{\"children\":[\"If you also installed \",[\"$\",\"code\",null,{\"children\":\"ceph-common\"}],\", you can remove it as well.\"]}],[\"$\",\"$L15\",null,{\"className\":\"language-shell\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-shell code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"sudo\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"apt\"}],\" remove ceph-common \",[\"$\",\"span\",null,{\"className\":\"token variable parameter\",\"children\":\"--purge\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"sudo\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"apt\"}],\" autoremove  \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"# remove the dependency of ceph-common\"}],\"\\n\"]}]]}]}],[\"$\",\"hr\",null,{}],[\"$\",\"p\",null,{\"children\":\"🚀 That's all for now folks! Hope you enjoy learning Ceph!\"}]]}],[\"$\",\"div\",null,{\"className\":\"pb-6 pt-6 text-sm text-gray-700 dark:text-gray-300\",\"children\":[\"$\",\"a\",null,{\"className\":\"break-words\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://github.com/chanchiwai-ray/chanchiwai-ray.github.io/blob/main/data/blog/ceph/deploy-three-nodes-microceph.mdx\",\"children\":\"View on GitHub\"}]}],[\"$\",\"div\",null,{\"className\":\"pb-6 pt-6 text-center text-gray-700 dark:text-gray-300\",\"id\":\"comment\",\"children\":[\"$\",\"$L16\",null,{\"slug\":\"ceph/deploy-three-nodes-microceph\",\"comments\":{\"provider\":\"giscus\",\"giscusConfig\":{\"repo\":\"$undefined\",\"repositoryId\":\"$undefined\",\"category\":\"$undefined\",\"categoryId\":\"$undefined\",\"mapping\":\"pathname\",\"reactions\":\"1\",\"metadata\":\"0\",\"theme\":\"light\",\"darkTheme\":\"transparent_dark\",\"themeURL\":\"\",\"lang\":\"en\"}}}]}]]}],[\"$\",\"footer\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y\",\"children\":[[\"$\",\"div\",null,{\"className\":\"py-4 xl:py-8\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400\",\"children\":\"Tags\"}],[\"$\",\"div\",null,{\"className\":\"flex flex-wrap\",\"children\":[[\"$\",\"$L5\",\"ceph\",{\"href\":\"/tags/ceph\",\"className\":\"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":\"ceph\"}],[\"$\",\"$L5\",\"lxd\",{\"href\":\"/tags/lxd\",\"className\":\"mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":\"lxd\"}]]}]]}],[\"$\",\"div\",null,{\"className\":\"flex justify-between py-4 xl:block xl:space-y-8 xl:py-8\",\"children\":[[\"$\",\"div\",null,{\"children\":[[\"$\",\"h2\",null,{\"className\":\"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400\",\"children\":\"Previous Article\"}],[\"$\",\"div\",null,{\"className\":\"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":[\"$\",\"$L5\",null,{\"className\":\"break-words\",\"href\":\"/blog/hello-world\",\"children\":\"Hello World\"}]}]]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"h2\",null,{\"className\":\"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400\",\"children\":\"Next Article\"}],[\"$\",\"div\",null,{\"className\":\"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"children\":[\"$\",\"$L5\",null,{\"className\":\"break-words\",\"href\":\"/blog/k8s/deploy-charmed-kubernetes\",\"children\":\"Setting Up Kubernetes Cluster with Canonical Kubernetes\"}]}]]}]]}]]}],[\"$\",\"div\",null,{\"className\":\"pt-4 xl:pt-8\",\"children\":[\"$\",\"$L5\",null,{\"className\":\"text-primary-500 hover:text-primary-600 dark:hover:text-primary-400\",\"href\":\"/blog\",\"aria-label\":\"Back to the blog\",\"children\":\"← Back to the blog\"}]}]]}]]}]]}]}]]}]]\n"])</script><script>self.__next_f.push([1,"11:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"f:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Setting Up Ceph Cluster with MicroCeph | Ray's Blog\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"Learning Ceph can sometimes be difficult due the resources required to set up a Ceph cluster. In this post, I am going demonstrate how you can set up a Ceph cluster on your laptop.\"}],[\"$\",\"meta\",\"3\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"meta\",\"4\",{\"name\":\"googlebot\",\"content\":\"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1\"}],[\"$\",\"link\",\"5\",{\"rel\":\"canonical\",\"href\":\"https://chanchiwai-ray.github.io/blog/ceph/deploy-three-nodes-microceph\"}],[\"$\",\"link\",\"6\",{\"rel\":\"alternate\",\"type\":\"application/rss+xml\",\"href\":\"https://chanchiwai-ray.github.io/feed.xml\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:title\",\"content\":\"Setting Up Ceph Cluster with MicroCeph\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:description\",\"content\":\"Learning Ceph can sometimes be difficult due the resources required to set up a Ceph cluster. In this post, I am going demonstrate how you can set up a Ceph cluster on your laptop.\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:url\",\"content\":\"https://chanchiwai-ray.github.io/blog/ceph/deploy-three-nodes-microceph\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:site_name\",\"content\":\"Ray's Blog\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:locale\",\"content\":\"en_US\"}],[\"$\",\"meta\",\"12\",{\"property\":\"og:image\",\"content\":\"https://chanchiwai-ray.github.io/static/images/x-card.png\"}],[\"$\",\"meta\",\"13\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"14\",{\"property\":\"article:published_time\",\"content\":\"2025-02-28T00:00:00.000Z\"}],[\"$\",\"meta\",\"15\",{\"property\":\"article:modified_time\",\"content\":\"2025-02-28T00:00:00.000Z\"}],[\"$\",\"meta\",\"16\",{\"property\":\"article:author\",\"content\":\"Chi Wai CHAN\"}],[\"$\",\"meta\",\"17\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"18\",{\"name\":\"twitter:title\",\"content\":\"Setting Up Ceph Cluster with MicroCeph\"}],[\"$\",\"meta\",\"19\",{\"name\":\"twitter:description\",\"content\":\"Learning Ceph can sometimes be difficult due the resources required to set up a Ceph cluster. In this post, I am going demonstrate how you can set up a Ceph cluster on your laptop.\"}],[\"$\",\"meta\",\"20\",{\"name\":\"twitter:image\",\"content\":\"https://chanchiwai-ray.github.io/static/images/x-card.png\"}]]\n"])</script><script>self.__next_f.push([1,"d:null\n"])</script></body></html>